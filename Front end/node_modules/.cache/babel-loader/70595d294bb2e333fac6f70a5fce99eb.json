{"ast":null,"code":"import React, { useState, useEffect } from 'react';\nimport './LoginForm.css';\nimport { FaUser, FaLock } from \"react-icons/fa\";\nimport axios from 'axios';\nimport { useNavigate, Link } from 'react-router-dom';\nconst LoginForm = () => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [rememberMe, setRememberMe] = useState(false);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    const storedUsername = localStorage.getItem('username');\n    if (storedUsername) {\n      setUsername(storedUsername);\n      setRememberMe(true);\n    }\n  }, []);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post('http://localhost:3000/auth/login', {\n        username,\n        password\n      });\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem('token', token);\n      localStorage.setItem('user', JSON.stringify(user));\n      if (rememberMe) {\n        localStorage.setItem('username', username);\n      } else {\n        localStorage.removeItem('username');\n      }\n      navigate('/library');\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'An error occurred during login');\n    }\n  };\n  const handleForgotPassword = e => {\n    e.preventDefault();\n    navigate('/forgot-password');\n  };\n  return React.createElement('div', {\n    className: 'login-page'\n  }, React.createElement('div', {\n    className: 'wrapper'\n  }, React.createElement('form', {\n    onSubmit: handleSubmit\n  }, React.createElement('h1', null, 'Login'), error && React.createElement('p', {\n    className: 'error'\n  }, error), React.createElement('div', {\n    className: 'input-box'\n  }, React.createElement('input', {\n    type: 'text',\n    placeholder: 'Username',\n    required: true,\n    value: username,\n    onChange: e => setUsername(e.target.value)\n  }), React.createElement(FaUser, {\n    className: 'icon'\n  })), React.createElement('div', {\n    className: 'input-box'\n  }, React.createElement('input', {\n    type: 'password',\n    placeholder: 'Password',\n    required: true,\n    value: password,\n    onChange: e => setPassword(e.target.value)\n  }), React.createElement(FaLock, {\n    className: 'icon'\n  })), React.createElement('button', {\n    type: 'submit'\n  }, 'Login'), React.createElement('div', {\n    className: 'options-below-login'\n  }, React.createElement('label', {\n    className: 'remember-me'\n  }, React.createElement('input', {\n    type: 'checkbox',\n    checked: rememberMe,\n    onChange: e => setRememberMe(e.target.checked)\n  }), 'Remember me'), React.createElement('button', {\n    type: 'button',\n    onClick: handleForgotPassword,\n    className: 'forgot-password'\n  }, 'Forgot Password?')), React.createElement('div', {\n    className: 'register-link'\n  }, React.createElement('p', null, \"Don't have an account? \", React.createElement(Link, {\n    to: '/register'\n  }, 'Create an account'))))));\n};\nexport default LoginForm;","map":{"version":3,"names":["React","useState","useEffect","FaUser","FaLock","axios","useNavigate","Link","LoginForm","username","setUsername","password","setPassword","rememberMe","setRememberMe","error","setError","navigate","storedUsername","localStorage","getItem","handleSubmit","e","preventDefault","response","post","token","user","data","setItem","JSON","stringify","removeItem","err","_err$response","_err$response$data","message","handleForgotPassword","createElement","className","onSubmit","type","placeholder","required","value","onChange","target","checked","onClick","to"],"sources":["C:/Users/Admin/Music Website/Front end/src/screens/login/LoginForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './LoginForm.css';\r\nimport { FaUser, FaLock } from \"react-icons/fa\";\r\nimport axios from 'axios';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\n\r\nconst LoginForm = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const storedUsername = localStorage.getItem('username');\r\n    if (storedUsername) {\r\n      setUsername(storedUsername);\r\n      setRememberMe(true);\r\n    }\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://localhost:3000/auth/login', { username, password });\r\n      const { token, user } = response.data;\r\n      localStorage.setItem('token', token);\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      if (rememberMe) {\r\n        localStorage.setItem('username', username);\r\n      } else {\r\n        localStorage.removeItem('username');\r\n      }\r\n      navigate('/library');\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'An error occurred during login');\r\n    }\r\n  };\r\n\r\n  const handleForgotPassword = (e) => {\r\n    e.preventDefault();\r\n    navigate('/forgot-password');\r\n  };\r\n\r\n  return React.createElement('div', { className: 'login-page' },\r\n    React.createElement('div', { className: 'wrapper' },\r\n      React.createElement('form', { onSubmit: handleSubmit },\r\n        React.createElement('h1', null, 'Login'),\r\n        error && React.createElement('p', { className: 'error' }, error),\r\n        React.createElement('div', { className: 'input-box' },\r\n          React.createElement('input', {\r\n            type: 'text',\r\n            placeholder: 'Username',\r\n            required: true,\r\n            value: username,\r\n            onChange: (e) => setUsername(e.target.value)\r\n          }),\r\n          React.createElement(FaUser, { className: 'icon' })\r\n        ),\r\n        React.createElement('div', { className: 'input-box' },\r\n          React.createElement('input', {\r\n            type: 'password',\r\n            placeholder: 'Password',\r\n            required: true,\r\n            value: password,\r\n            onChange: (e) => setPassword(e.target.value)\r\n          }),\r\n          React.createElement(FaLock, { className: 'icon' })\r\n        ),\r\n        React.createElement('button', { type: 'submit' }, 'Login'),\r\n        React.createElement('div', { className: 'options-below-login' },\r\n          React.createElement('label', { className: 'remember-me' },\r\n            React.createElement('input', {\r\n              type: 'checkbox',\r\n              checked: rememberMe,\r\n              onChange: (e) => setRememberMe(e.target.checked)\r\n            }),\r\n            'Remember me'\r\n          ),\r\n          React.createElement('button', {\r\n            type: 'button',\r\n            onClick: handleForgotPassword,\r\n            className: 'forgot-password'\r\n          }, 'Forgot Password?')\r\n        ),\r\n        React.createElement('div', { className: 'register-link' },\r\n          React.createElement('p', null,\r\n            \"Don't have an account? \",\r\n            React.createElement(Link, { to: '/register' }, 'Create an account')\r\n          )\r\n        )\r\n      )\r\n    )\r\n  );\r\n};\r\n\r\nexport default LoginForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}